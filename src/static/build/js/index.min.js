"use strict";var logout=function(){sessionStorage.removeItem("token"),window.location.replace("/")},modal=document.getElementById("modalDeLogout"),cancel=function(){modal.style.display="none",document.querySelector(".modal-backdrop").classList.add("d-none")},reappear=function(){modal.style.display="block"},previewImage=function(e){var t=document.querySelector(".divPreviewImg"),n=document.getElementById("clearInputAndDiv"),o=document.getElementById("gifUpload"),s=new FileReader;o.classList.remove("d-inline"),o.classList.add("d-none"),s.onload=function(){t.classList.remove("d-none"),setTimeout(function(){var e=document.getElementById("previewImg");e.src=s.result,e.classList.remove("d-none"),n.classList.remove("d-none")},900)},s.readAsDataURL(e.target.files[0])},showHideDivUplad=function(e,t,n){var o=n,s=t,d=document.getElementById("upladoImage"),a=document.getElementById("previewImg");hideElement("gifUpload"),hideElement("iconRightUpload"),e?(o.forEach(function(e){return hideElement(e)}),d.value="",hideElement(".divPreviewImg"),a.classList.add("d-none"),clearInputAndDiv.classList.add("d-none"),showElement(e),setTimeout(function(){hideElement(e),s.forEach(function(e){return showElement(e)})},1500)):(hideElement(".loadingUpload"),hideElement(".divPreviewImg"),d.value="",a.classList.add("d-none"),clearInputAndDiv.classList.add("d-none"),o.forEach(function(e){return hideElement(e)}),s.forEach(function(e){return showElement(e)}))},showElement=function(e){var t=document.getElementById(e)||document.querySelector(e);t.classList.remove("d-none"),t.classList.add("d-block")},showElementInline=function(e){var t=document.getElementById(e)||document.querySelector(e);t.classList.remove("d-none"),t.classList.add("d-inline")},hideElement=function(e){var t=document.getElementById(e)||document.querySelector(e);t.classList.remove("d-block"),t.classList.remove("d-inline"),t.classList.add("d-none")},updateFirstAccess=function(){var e=sessionStorage.getItem("token"),t=document.querySelector(".divContainerWelcome");t.classList.remove("d-block"),t.classList.add("d-none"),axios({method:"patch",url:"dashboard/firstAccess",headers:{authorization:e}}).then(function(e){document.querySelector(".cardPanelContainer").classList.remove("d-none"),console.log("Sucess no update first access")}).catch(function(e){document.querySelector(".cardPanelContainer").classList.remove("d-none"),console.log("Error no update first access"+e)})},submitImage=function(){var e=document.getElementById("uploadImage");e.addEventListener("submit",function(e){e.preventDefault()});var t=sessionStorage.getItem("token");hideElement("clearInputAndDiv"),hideElement(".divErrorUpload"),showElementInline("gifUpload"),axios({method:"post",url:"/upload",data:new FormData(e),headers:{authorization:t,"Content-Type":"multipart/form-data"}}).then(function(e){hideElement("gifUpload"),showElementInline("iconRightUpload"),setTimeout(function(){document.getElementById("dropDrownNav").src=e.data,document.getElementById("imgUser").src=e.data,document.querySelector(".card-img-top").src=e.data,showHideDivUplad(null,[".divBtnsCrud",".cardPanelContainer"],[".divUpload"])},1100)}).catch(function(e){document.querySelector(".textErrorUpload").innerHTML="Error, please try again.",showElement(".divErrorUpload")})},clearInput=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){var t=document.getElementById(e);t.value="",t.style.background="none",t.classList.add("border-light")})},emailCreate=!1,emailLogin=!1,validationInput=function(e,t){var n=document.getElementById(e).value,o=document.getElementById(e);emailLogin=emailCreate=n.length>=Number(t)?(o.classList.remove("border-light"),o.classList.remove("border-danger"),o.classList.add("border-success"),o.style.background="url('../static/build/img/input-text-right.png') 95% 50% no-repeat",!0):(""==n.length?o.classList.add("border-light"):(o.classList.remove("border-light"),o.style.background="none",o.classList.add("border-danger")),!1)},validationEmail=function(e,t){var n=document.getElementById(e).value,o=document.getElementById(e),s=n.substring(0,n.indexOf("@")),d=n.substring(n.indexOf("@")+1,n.length);3<s.length&&-1===s.search(" ")&&5<d.length&&-1===d.search(" ")&&-1!=d.indexOf(".")?(o.classList.remove("border-light"),o.classList.remove("border-danger"),o.classList.add("border-success"),o.style.background="url('../static/build/img/input-text-right.png') 95% 50% no-repeat",emailLogin=emailCreate=!0,verificationButton(t)):0==n.length||""===n.value?(emailLogin=emailCreate=!1,o.classList.add("border-light"),disableButton(t)):(disableButton(t),emailLogin=emailCreate=!1,o.style.background="none",o.classList.remove("border-light"),o.classList.add("border-danger"))},disableButton=function(e){var t=document.querySelector(e);t&&(t.setAttribute("disabled","disabled"),t.classList.remove("btn-outline-light"),t.classList.add("btn-outline-secondary"))},enableButton=function(e){var t=document.querySelector(e);t.removeAttribute("disabled"),t.classList.add("btn-outline-light")},clearTime=function(e){clearInterval(e)},verification=void 0,verificationButton=function(e){verification=setInterval(function(){(null!=document.getElementById("entName")&&3<=document.getElementById("entName").value.length&&6<=document.getElementById("entPass").value.length&&!0===emailCreate||!0===emailLogin&&null!=document.getElementById("pass")&&6<=document.getElementById("pass").value.length?enableButton:disableButton)(e)},100)},LoginUser=function(){document.getElementById("formLogin").addEventListener("submit",function(e){e.preventDefault()});var e=document.getElementById("user").value,t=document.getElementById("pass").value,n=document.querySelector(".divErro"),o=document.querySelector(".textDivErro");hideElement(".textDivErro"),hideElement(".iconErro"),n.classList.remove("d-none"),showElement("imgLoadingLogin"),axios.post("/",{loginUser:e,passUser:t}).then(function(t){if(!0!==t.data.success||200!==t.status)throw"Sorry, Erro in Login, Try again";sessionStorage.setItem("token",t.data.token),axios.get("/dashboard",{headers:{authorization:sessionStorage.getItem("token")}}).then(function(e){clearTime(verification),hideElement("imgLoadingLogin"),document.title="Dashboard",document.querySelector("body").innerHTML=e.data;var t=document.querySelector(".animation");setTimeout(function(){t.classList.remove("d-flex"),t.classList.add("d-none"),document.querySelector(".containner-fluid").classList.remove("d-none")},4e3)}).catch(function(e){hideElement("imgLoadingLogin"),o.innerHTML=t.data.message,showElementInline(".textDivErro"),showElementInline(".iconErro")})}).catch(function(e){setTimeout(function(){hideElement("imgLoadingLogin"),o.innerHTML=e.response.data,showElementInline(".textDivErro"),showElementInline(".iconErro")},1e3)})},hideLoadingShowResponse=function(e){var t=document.querySelector(".bodyModal"),n=document.getElementById("textModal"),o=document.getElementById("modal-footer");setTimeout(function(){t.classList.remove("d-block"),t.classList.add("d-none"),n.innerHTML=e,n.classList.remove("d-none"),n.classList.add("d-block"),o.classList.remove("d-none"),o.classList.add("d-block")},1100)},btnletsIndex=document.getElementById("letsIndex"),btnCloseModal=document.getElementById("btnCloseModal"),returnLogin=function(){var e=document.getElementById("containerFormRegister");btnletsIndex.classList.remove("d-none"),btnletsIndex.classList.add("d-block"),btnletsIndex.addEventListener("click",function(){e.classList.remove("d-block"),e.classList.add("d-none")})},closeModal=function(){var e=document.getElementById("modalRegister");btnCloseModal.classList.remove("d-none"),btnCloseModal.classList.add("d-block"),btnCloseModal.addEventListener("click",function(){e.style.display="none"})},hideElements=function(){var e=document.getElementById("letsIndex");e.classList.remove("d-block"),e.classList.add("d-none");var t=document.getElementById("btnCloseModal");t.classList.remove("d-block"),t.classList.add("d-none");var n=document.querySelector(".bodyModal");n.classList.remove("d-none"),n.classList.add("d-block");var o=document.getElementById("textModal");o.classList.remove("d-block"),o.classList.add("d-none");var s=document.getElementById("modal-footer");s.classList.remove("d-block"),s.classList.add("d-none")},registerUser=function(){document.getElementById("formCreateUser").addEventListener("submit",function(e){return e.preventDefault()});var e=document.getElementById("entName").value,t=upperText(e),n=document.getElementById("entPass").value,o=document.getElementById("entEmail").value;hideElements(),axios.post("/register",{userName:t,userPassword:n,userEmail:o}).then(function(e){201===e.status&&"user created"===e.data&&(clearInput("entName","entEmail","entPass"),hideLoadingShowResponse(e.data),window.console.clear(),returnLogin())}).catch(function(e){hideLoadingShowResponse(e.response.data),closeModal()})},buttonSendEmail=document.getElementById("send-form-reset-password"),divResponse=document.getElementById("div-response");function showResponse(e){divResponse.innerHTML=e,divResponse.classList.add("alert","alert-danger","mt-3","position-absolute","w-100")}function hideResponse(){divResponse.classList.remove("position-absolute","w-100","alert","alert-danger","mt-3"),divResponse.innerHTML=""}function hideResponseWithClickInput(e){document.getElementById(e).addEventListener("click",function(e){hideResponse()})}buttonSendEmail&&buttonSendEmail.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById("email-reset-password");null!=t.value&&""!=t.value?axios.post("/reset-password",{mailuserResetPassword:t.value}).then(function(e){e.data.error||(showResponse(e.data.message),t.value="",document.querySelector("#backHome > p").classList.add("d-none"),document.querySelector("#backHome > a").classList.remove("d-none"),document.querySelector("#backHome > a").classList.add("d-block"))}).catch(function(e){showResponse(e.response.data.message),t.focus(),hideResponseWithClickInput("email-reset-password")}):(showResponse("Please insert data valid"),hideResponseWithClickInput("email-reset-password"))});var showFormLogin=function(e){var t=0<arguments.length&&void 0!==e?e:void 0,n=document.querySelector(".logo"),o=document.querySelector(".divLogin"),s=document.querySelector(".divEfectLoadingLogin"),d=document.querySelector(t);clearInput("user","pass"),document.querySelector(".divErro").classList.add("d-none"),void 0!==t&&(d.addEventListener("click",function(e){return e.preventDefault()}),d.classList.remove("d-block"),d.classList.add("d-none")),n.classList.remove("d-block"),n.classList.add("d-none"),s.classList.remove("d-none"),setTimeout(function(){s.classList.add("d-none"),o.classList.remove("d-none"),n.classList.remove("d-none"),o.classList.add("d-block"),n.classList.add("d-block")},2e3)},showFormRegister=function(){document.getElementById("btnRegister-js").addEventListener("click",function(e){return e.preventDefault()}),clearInput("entName","entPass","entEmail");var e=document.querySelector(".divLogin"),t=document.querySelector(".divEfectLoadingRegister"),n=document.querySelector(".containerFormRegister"),o=document.querySelector(".logo"),s=document.querySelector(".dImg2");e.classList.remove("d-block"),e.classList.add("d-none"),o.classList.remove("d-block"),o.classList.add("d-none"),t.classList.add("d-block"),s.classList.add("d-block"),setTimeout(function(){t.classList.remove("d-block"),s.classList.remove("d-block"),n.classList.remove("d-none"),o.classList.remove("d-none"),n.classList.add("d-block"),o.classList.add("d-block")},2e3)};showElement=function(e){var t=document.getElementById(e)||document.querySelector(e);t.classList.remove("d-none"),t.classList.add("d-block")},showElementInline=function(e){var t=document.getElementById(e)||document.querySelector(e);t.classList.remove("d-none"),t.classList.add("d-inline")},hideElement=function(e){var t=document.getElementById(e)||document.querySelector(e);t.classList.remove("d-block"),t.classList.remove("d-inline"),t.classList.add("d-none")};function showHidePassword(e){var t=document.getElementById(e);"password"==t.type?t.type="text":t.type="password"}var upperText=function(e){var t=e.split(" "),n=t.map(function(e){return e.substring(0,1).toUpperCase()}),o=t.map(function(e){return e.substring(1,e.lenght).toLowerCase()});return n.map(function(e,t){return"".concat(e).concat(o[t])}).reduce(function(e,t){return"".concat(e," ").concat(t)})},updatePageDashboard=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){var t=document.createElement("script");t.src=e,document.querySelector("body").appendChild(t)})};